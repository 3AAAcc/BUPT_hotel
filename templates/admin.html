<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>报表中心 - 经理端</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reception.css') }}"> <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="logo"><i class="fa-solid fa-chart-line"></i> <span>Hotel BI</span></div>
            <nav class="nav-menu">
                <a href="/" class="nav-item"><i class="fa-solid fa-house"></i> 首页</a>
                <a href="/monitor/dashboard" class="nav-item"><i class="fa-solid fa-desktop"></i> 调度监控</a>
                <a href="#" class="nav-item active"><i class="fa-solid fa-table"></i> 报表中心</a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="page-header-simple">
                <h2>经营数据报表</h2>
                <p>查看房间明细、每日及每周营收统计</p>
            </header>

            <div class="report-control-card">
                <ul class="nav nav-tabs" id="reportTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="room-tab" data-bs-toggle="tab" data-bs-target="#room-panel" type="button">
                            <i class="fa-solid fa-door-open"></i> 房间详单
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="daily-tab" data-bs-toggle="tab" data-bs-target="#daily-panel" type="button">
                            <i class="fa-solid fa-calendar-day"></i> 日报表
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="weekly-tab" data-bs-toggle="tab" data-bs-target="#weekly-panel" type="button">
                            <i class="fa-solid fa-calendar-week"></i> 周报表
                        </button>
                    </li>
                </ul>

                <div class="tab-content" id="reportTabContent">
                    
                    <div class="tab-pane fade show active" id="room-panel" role="tabpanel">
                        <div class="filter-bar">
                            <div class="input-group">
                                <span class="input-group-text">房间号</span>
                                <input type="number" id="roomReportId" class="form-control" placeholder="输入 ID (例如: 1)">
                                <button class="btn btn-primary" onclick="queryRoomReport()">
                                    <i class="fa-solid fa-search"></i> 查询
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>房间号</th>
                                        <th>开始时间</th>
                                        <th>结束时间</th>
                                        <th>时长(分)</th>
                                        <th>风速</th>
                                        <th>费率</th>
                                        <th>费用(元)</th>
                                    </tr>
                                </thead>
                                <tbody id="room-tbody">
                                    <tr><td colspan="7" class="text-center text-muted">请输入房间号查询</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="daily-panel" role="tabpanel">
                        <div class="filter-bar">
                            <div class="input-group">
                                <span class="input-group-text">日期</span>
                                <input type="date" id="dailyDate" class="form-control">
                                <button class="btn btn-primary" onclick="queryDailyReport()">
                                    <i class="fa-solid fa-search"></i> 生成日报
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>房间号</th>
                                        <th>空调开启次数</th>
                                        <th>总时长(分)</th>
                                        <th>总费用(元)</th>
                                        <th>调度次数</th>
                                        <th>详单数</th>
                                        <th>平均温差</th>
                                    </tr>
                                </thead>
                                <tbody id="daily-tbody">
                                    <tr><td colspan="7" class="text-center text-muted">请选择日期查询</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="weekly-panel" role="tabpanel">
                        <div class="filter-bar">
                            <div class="input-group">
                                <span class="input-group-text">开始日期</span>
                                <input type="date" id="weeklyDate" class="form-control">
                                <button class="btn btn-primary" onclick="queryWeeklyReport()">
                                    <i class="fa-solid fa-search"></i> 生成周报
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>房间号</th>
                                        <th>空调开启次数</th>
                                        <th>总时长(分)</th>
                                        <th>总费用(元)</th>
                                        <th>调度次数</th>
                                        <th>详单数</th>
                                        <th>平均温差</th>
                                    </tr>
                                </thead>
                                <tbody id="weekly-tbody">
                                    <tr><td colspan="7" class="text-center text-muted">请选择开始日期查询</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
    <script>
        // 设置默认日期为今天
        document.getElementById('dailyDate').valueAsDate = new Date();
        document.getElementById('weeklyDate').valueAsDate = new Date();
    </script>
</body>
</html>