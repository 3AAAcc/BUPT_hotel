=== test_room1_waiting start ===
======================================================================
Room 1 等待队列回温问题复现脚本
======================================================================

>>> 步骤 1: 初始化 Room 1
   Room 1: init_temp=12.0°C, default_temp=10.0°C (应该向 10.0°C 回温)
  √ Room 1: Mode=HEATING, Temp=12.0°C, DefaultTemp=10.0°C, Rate=100.0

>>> 步骤 2: 初始化其他房间（用于占满服务队列）
  √ Room 2: Mode=HEATING, Temp=15.0°C, DefaultTemp=15.0°C, Rate=125.0
  √ Room 3: Mode=HEATING, Temp=18.0°C, DefaultTemp=18.0°C, Rate=150.0
  √ Room 4: Mode=HEATING, Temp=12.0°C, DefaultTemp=12.0°C, Rate=200.0
  √ Room 5: Mode=HEATING, Temp=14.0°C, DefaultTemp=14.0°C, Rate=100.0

>>> 步骤 3: 开启其他房间，占满服务队列
  [Min 0]
-----------------------------------------------------------------
Rm  St   Cur    Tar   Spd  Fee      Mode     Default
-----------------------------------------------------------------
1   OFF  12.00  22.0  M    100.00   HEATING  10.0
2   ON   15.01  25.0  M    125.00   HEATING  15.0
3   OFF  18.00  22.0  M    150.00   HEATING  18.0
4   ON   12.01  22.0  M    200.00   HEATING  12.0
5   ON   14.00  22.0  H    100.00   HEATING  14.0
-----------------------------------------------------------------

=== Queue Status ===
Capacity=3  TimeSlice=120s
ServingQueue:
  Room 2  Fan=MEDIUM  Slice=1.7s  Total=2s
  Room 4  Fan=MEDIUM  Slice=1.2s  Total=1s
  Room 5  Fan=HIGH  Slice=0.6s  Total=61s
WaitingQueue:
====================


>>> 步骤 4: 开启 Room 1，目标温度 24.0（应该进入等待队列）
  [Min 1]
-----------------------------------------------------------------
Rm  St   Cur    Tar   Spd  Fee      Mode     Default
-----------------------------------------------------------------
1   ON   12.00  24.0  M    100.00   HEATING  10.0
2   ON   15.01  25.0  M    125.00   HEATING  15.0
3   OFF  18.00  22.0  M    150.00   HEATING  18.0
4   ON   12.01  22.0  M    200.00   HEATING  12.0
5   ON   14.00  22.0  H    100.00   HEATING  14.0
-----------------------------------------------------------------

=== Queue Status ===
Capacity=3  TimeSlice=120s
ServingQueue:
  Room 2  Fan=MEDIUM  Slice=2.4s  Total=2s
  Room 4  Fan=MEDIUM  Slice=1.8s  Total=2s
  Room 5  Fan=HIGH  Slice=1.2s  Total=61s
WaitingQueue:
  Room 1  Fan=MEDIUM  Wait=0.6s
====================

Room 1 状态: ac_on=True, current_temp=12.00, target_temp=24.0, default_temp=10.0

>>> 步骤 5: 观察 Room 1 的温度变化（应该向 10.0°C 回温）
  等待 1 分钟，观察温度变化...

  [Min 2] 初始温度: 12.00°C
-----------------------------------------------------------------
Rm  St   Cur    Tar   Spd  Fee      Mode     Default
-----------------------------------------------------------------
1   ON   12.00  24.0  M    100.00   HEATING  10.0
2   ON   15.01  25.0  M    125.00   HEATING  15.0
3   OFF  18.00  22.0  M    150.00   HEATING  18.0
4   ON   12.01  22.0  M    200.00   HEATING  12.0
5   ON   14.00  22.0  H    100.00   HEATING  14.0
-----------------------------------------------------------------

=== Queue Status ===
Capacity=3  TimeSlice=120s
ServingQueue:
  Room 2  Fan=MEDIUM  Slice=2.5s  Total=2s
  Room 4  Fan=MEDIUM  Slice=1.9s  Total=2s
  Room 5  Fan=HIGH  Slice=1.4s  Total=61s
WaitingQueue:
  Room 1  Fan=MEDIUM  Wait=0.7s
====================

  [Min 3] 1分钟后温度: 11.51°C
  温度变化: -0.49°C (期望: -0.50°C)
  ✅ 正确：温度变化符合预期
-----------------------------------------------------------------
Rm  St   Cur    Tar   Spd  Fee      Mode     Default
-----------------------------------------------------------------
1   ON   11.51  24.0  M    100.00   HEATING  10.0
2   ON   15.51  25.0  M    125.50   HEATING  15.0
3   OFF  18.00  22.0  M    150.00   HEATING  18.0
4   ON   12.50  22.0  M    200.50   HEATING  12.0
5   ON   15.00  22.0  H    101.00   HEATING  14.0
-----------------------------------------------------------------

=== Queue Status ===
Capacity=3  TimeSlice=120s
ServingQueue:
  Room 2  Fan=MEDIUM  Slice=62.6s  Total=63s
  Room 4  Fan=MEDIUM  Slice=62.0s  Total=62s
  Room 5  Fan=HIGH  Slice=61.4s  Total=121s
WaitingQueue:
  Room 1  Fan=MEDIUM  Wait=60.8s
====================


>>> 步骤 6: 继续观察 1 分钟
  [Min 4] 当前温度: 11.51°C
  [Min 5] 1分钟后温度: 11.06°C
  温度变化: -0.45°C (期望: -0.5°C)
-----------------------------------------------------------------
Rm  St   Cur    Tar   Spd  Fee      Mode     Default
-----------------------------------------------------------------
1   ON   11.05  24.0  M    100.00   HEATING  10.0
2   ON   16.01  25.0  M    126.00   HEATING  15.0
3   OFF  18.00  22.0  M    150.00   HEATING  18.0
4   ON   13.00  25.0  M    201.00   HEATING  12.0
5   ON   16.00  22.0  H    102.00   HEATING  14.0
-----------------------------------------------------------------

=== Queue Status ===
Capacity=3  TimeSlice=120s
ServingQueue:
  Room 1  Fan=MEDIUM  Slice=2.3s  Total=2s
  Room 2  Fan=MEDIUM  Slice=2.3s  Total=122s
  Room 5  Fan=HIGH  Slice=1.3s  Total=181s
WaitingQueue:
  Room 4  Fan=MEDIUM  Wait=2.4s
====================


======================================================================
测试完成
======================================================================
