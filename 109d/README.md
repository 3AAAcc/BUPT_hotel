# 酒店中央空调管理系统 - 前端

Vue3 + Vite + Element Plus 前端项目

## 技术栈

- **Vue 3** - 渐进式 JavaScript 框架
- **Vite** - 下一代前端构建工具
- **Vue Router** - 官方路由管理器
- **Pinia** - 状态管理
- **Element Plus** - Vue 3 组件库
- **Axios** - HTTP 客户端

## 项目结构

```
frontend/
├── src/
│   ├── api/              # API 接口封装
│   │   ├── request.js    # Axios 封装（统一请求/响应处理）
│   │   ├── ac.js         # 空调控制 API
│   │   ├── hotel.js      # 酒店管理 API（入住/退房）
│   │   ├── admin.js      # 管理员 API
│   │   ├── monitor.js    # 监控 API
│   │   ├── report.js     # 报表 API
│   │   └── index.js      # 统一导出
│   ├── router/           # 路由配置
│   │   └── index.js      # 路由定义（客户/前台/管理员/经理）
│   ├── store/            # Pinia 状态管理
│   │   ├── ac.js         # 空调状态管理
│   │   ├── room.js       # 房间状态管理
│   │   └── index.js      # 统一导出
│   ├── views/            # 页面组件
│   │   ├── Customer.vue  # 客户界面 - 控制自己房间的空调
│   │   ├── Reception.vue # 前台管理 - 办理入住/退房
│   │   ├── Admin.vue     # 监控界面 - 查看所有房间状态
│   │   └── Manager.vue   # 经理报表 - 查看统计和监控
│   ├── components/       # 公共组件
│   │   └── Navigation.vue # 顶部导航菜单
│   ├── App.vue           # 根组件
│   ├── main.js           # 入口文件
│   └── style.css         # 全局样式
├── index.html            # HTML 模板
├── package.json          # 项目配置和依赖
├── vite.config.js       # Vite 配置（包含代理设置）
└── README.md            # 项目说明文档
```

## 安装依赖

```bash
npm install
```

## 开发运行

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

## 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist` 目录

## 页面功能说明

### 1. 客户界面 (`/customer`)

客户控制自己房间的空调系统：

- **房间选择**：下拉选择要控制的房间
- **状态显示**：
  - 当前温度、目标温度
  - 空调运行状态（运行中/已关闭）
  - 工作模式（制冷/制热）
  - 风速（低风/中风/高风）
  - 队列状态（空闲/服务中/等待中/已暂停）
  - 当前费用和总费用
- **空调控制**：
  - 开启/关闭空调
  - 温度设置（滑块 + 数字输入）
  - 风速切换（低风/中风/高风）
  - 模式切换（制冷/制热）
- **自动刷新**：每 3 秒自动刷新房间状态

### 2. 前台管理 (`/reception`)

前台工作人员办理入住和退房：

- **房间管理**：
  - 查看所有房间列表
  - 显示房间状态（可用/已入住/维修中）
  - 显示当前温度和空调状态
  - 显示客户姓名
- **办理入住**：
  - 选择可用房间
  - 填写客户信息（姓名、身份证号、联系电话）
  - 提交入住申请
- **办理退房**：
  - 选择已入住房间
  - 确认退房操作
  - 显示退房账单（房费、空调费、总金额）

### 3. 监控界面 (`/admin`)

实时监控所有房间的状态：

- **房间状态总览**：
  - 表格显示所有房间的详细状态
  - 包括温度、空调状态、模式、风速、队列状态、费用等
  - 只读展示，不提供控制功能
- **自动刷新**：每 5 秒自动刷新所有房间状态

### 4. 经理报表 (`/manager`)

经理查看统计报表和系统监控：

- **实时监控**：
  - 调度器状态（总容量、时间片）
  - 服务队列详情（房间号、风速、模式、服务时长）
  - 等待队列详情（房间号、等待时长）
  - 每 5 秒自动刷新
- **房间报表**：
  - 按房间号查询详单
  - 显示每次使用的开始时间、结束时间、时长、费用等
- **日报表**：
  - 选择日期查询
  - 显示每个房间的使用次数、总时长、总费用、调度次数等
- **周报表**：
  - 选择开始日期查询一周数据
  - 统计每个房间一周内的使用情况

## API 配置

### 开发环境

默认代理配置在 `vite.config.js` 中，后端 API 地址为 `http://127.0.0.1:8080`

Vite 会自动将 `/api/*` 的请求代理到后端服务器

### 生产环境

如需修改 API 地址，可在项目根目录创建 `.env` 文件：

```env
VITE_API_BASE_URL=http://your-api-url
```

然后在 `src/api/request.js` 中使用：

```javascript
baseURL: import.meta.env.VITE_API_BASE_URL || '/api'
```

## 技术特点

### 1. Axios 统一封装

- 请求/响应拦截器
- 统一错误处理
- 自动显示错误消息
- 支持标准响应格式和原始数据格式（向后兼容）

### 2. Pinia 状态管理

- `ac` store：管理空调状态
- `room` store：管理房间列表
- 响应式数据，自动更新 UI

### 3. Element Plus UI

- 丰富的组件库
- 统一的视觉风格
- 响应式布局
- 图标支持

### 4. 路由管理

- Vue Router 4
- 路由守卫（设置页面标题）
- 懒加载页面组件

### 5. 开发体验

- Vite 快速热更新
- TypeScript 支持（可选）
- 代码分割和懒加载
- 生产环境优化

## 使用流程

### 1. 启动后端服务

```bash
cd coco_hotel
python run.py
```

确保后端服务运行在 `http://127.0.0.1:8080`

### 2. 启动前端服务

```bash
cd frontend
npm install
npm run dev
```

### 3. 访问应用

打开浏览器访问 `http://localhost:3000`

### 4. 功能测试

1. **客户界面**：选择房间，控制空调
2. **前台管理**：办理入住和退房
3. **监控界面**：查看所有房间状态
4. **经理报表**：查看监控和统计报表

## 常见问题

### Q: 前端无法连接后端？

A: 检查以下几点：
1. 后端服务是否已启动（`http://127.0.0.1:8080`）
2. 检查浏览器控制台的错误信息
3. 确认 `vite.config.js` 中的代理配置正确

### Q: 页面显示空白？

A: 检查：
1. 浏览器控制台是否有 JavaScript 错误
2. 网络请求是否成功
3. 路由配置是否正确

### Q: 如何修改端口？

A: 修改 `vite.config.js` 中的 `server.port` 配置

## 开发建议

1. **API 调用**：统一使用 `src/api/` 下的封装函数
2. **状态管理**：需要共享的状态使用 Pinia store
3. **组件复用**：公共组件放在 `src/components/`
4. **样式规范**：使用 Element Plus 的主题变量
5. **错误处理**：所有 API 调用都要有错误处理

## 后续优化方向

- [ ] 添加用户登录/权限管理
- [ ] 优化移动端适配
- [ ] 添加数据可视化图表
- [ ] 实现实时推送（WebSocket）
- [ ] 添加国际化支持
- [ ] 性能优化和代码分割

## 许可证

MIT License
